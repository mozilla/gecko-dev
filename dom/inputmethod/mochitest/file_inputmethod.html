<html>
<body>
<script>
  var im = navigator.mozInputMethod;
  if (im) {
    im.oninputcontextchange = onIcc;

    if (im.inputcontext) {
      onIcc();
    }
  }

  function onIcc() {
    var ctx = im.inputcontext;
    if (ctx) {
      ctx.replaceSurroundingText(location.hash).then(function() {
        /* Happy flow */
      }, function(err) {
        dump('ReplaceSurroundingText failed ' + err + '\n');
      });
    }
  }
</script>
</body>
</html>
