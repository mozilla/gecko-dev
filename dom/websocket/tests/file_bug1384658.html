<!DOCTYPE html>
<html>
<script>
  onload = function() {
    function done(success) {
      var bc = SpecialPowers.wrap(BroadcastChannel).unpartitionedTestingChannel("test_channel");
      bc.postMessage({success});
      bc.close();
    }
    try {
      new WebSocket("ws://mochi.test:8888/tests/dom/websocket/tests/file_websocket_basic");
      done(true); // no hang!
    } catch (e) {
      done(false);
    }
  }
</script>
</html>
