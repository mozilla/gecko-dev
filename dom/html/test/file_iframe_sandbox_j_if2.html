<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Test for Bug 766282</title>
  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
</head>

<script type="text/javascript">
  function doSubOpens() {
    // Open a new window showModalDialog().
    try {
      window.showModalDialog("file_iframe_sandbox_k_if9.html");
    } catch(e) {
      window.parent.ok_wrapper(false, "iframes sandboxed with allow-popups should be able to open a modal dialog");
    }
  }

  window.doSubOpens = doSubOpens;
</script>

<body>
  I am sandboxed but with "allow-scripts allow-popups allow-same-origin".
  After my initial load, "allow-same-origin" is removed and then I open file_iframe_sandbox_k_if9.html,
  which attemps to call a function in my parent.
  This should succeed since the new sandbox flags shouldn't have taken affect on me until I'm reloaded.
</body>
</html>
