<html>
<head>
  <title>NPAPI NP_ASFILE NPStream Test</title>
  <script type="text/javascript" 
          src="/tests/SimpleTest/SimpleTest.js"></script>
  <script type="text/javascript" 
          src="pluginstream.js"></script>
  <script type="text/javascript" src="plugin-utils.js"></script>
  <script type="text/javascript">
    setTestPluginEnabledState(SpecialPowers.Ci.nsIPluginTag.STATE_ENABLED);
  </script>
  <link rel="stylesheet" type="text/css" 
        href="/tests/SimpleTest/test.css" />
</head>
<body>
  <p id="display"></p>

  <iframe id="testframe" name="testframe" onload="frameLoaded()"></iframe>

  <!--
   - Similar to the above tests, but NPP_NewStream sets the stream mode
   - to NP_ASFILE.  In this test, stream data is written in a series of
   - NPP_Write calls, as per NP_NORMAL, and also written to a file whose
   - path is passed to NPP_StreamAsFile.  The plugin compares the file
   - and the stream to verify they're indentical, then passes the stream
   - back to the browser via NPN_GetURL as above.
   -->
  <embed src="loremipsum_file.txt" streammode="asfile"
         frame="testframe"
         id="embedtest" style="width: 400px; height: 100px;"
         type="application/x-test"></embed>
 </body>
 </html>
