<div>Hello World!</div>
<script>
const object = {
  obj: { value: 0, subobj: { subvalue: 0 } },
  value: 0,
};
const cpmm = SpecialPowers.Services.cpmm;
function recordingFinished() {
  cpmm.sendAsyncMessage("RecordingFinished");
}
let iteration = 0;
function f() {
  iteration++;
  updateObject();
  console.log(`Iteration ${iteration}`, object);
  if (iteration >= 10) {
    window.setTimeout(recordingFinished);
    return;
  }
  window.setTimeout(f, 100);
}
function updateObject() {
  object.value = iteration;
  object.obj.value = iteration * 2;
  object.obj.subobj.subvalue = iteration * 3;
}
window.setTimeout(f, 100);
</script>
