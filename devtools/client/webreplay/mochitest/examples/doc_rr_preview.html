<div>Hello World!</div>
<script>
setTimeout(foo, 0);
function foo() {
  const fooobj = { fooprop1: 0, fooprop2: 1 };
  bar();
}
function bar() {
  const barobj = {
    barprop1: 2,
    barprop2: 3,
    nested: {
      nestedprop1: 4,
    }
  };
  const bararr = [5, 6];
  update(barobj, bararr);
  setTimeout(recordingFinished, 0);
}
function update(obj, arr) {
  obj.barprop1 = "updated";
  arr.push("new");
}
function recordingFinished() {
  SpecialPowers.Services.cpmm.sendAsyncMessage("RecordingFinished");
}
</script>
