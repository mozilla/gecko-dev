(function(){var H,F,R,N=null,A={},P={searchSuggestion:"Search the BBC"},G={updateNoImagesState:function(){var S=F("#blq-search-btn")[0];if(S.currentStyle){var T=S.currentStyle.backgroundImage}else{if(window.getComputedStyle){var T=document.defaultView.getComputedStyle(S,null).getPropertyValue("background-image")}}if(T.indexOf("search_icon.png")==-1){return false}else{F("#blq-mast-home").removeClass("blq-no-images");return true}},searchTheBBCSearchHint:function(){var S=F("#blq-search");R(S,"focus",function(){if(S.val()==P.searchSuggestion){S.val("")}});R(S,"blur",function(){if(!S.val()){S.val(P.searchSuggestion)}});R(S.parent().parent(),"submit",function(T){if(S.val()==P.searchSuggestion){S.val("")}});if(S.val()==""&&!F(document.activeElement).eq(S)){S.val(P.searchSuggestion)}},addMorePanel:function(){var T=F("#blq-nav-links"),V=F("#blq-nav-main");T.css({visibility:"hidden",display:"block"});var S=F("body"),U=new H.widgets.Panel(F("#blq-nav-links"),{modal:false,hideWindowedFlash:false,width:T.width(),height:T.height(),template:'<div><div class="panel-hd"></div><div class="panel-bd"></div><div class="panel-ft"></div></div>',autoPosition:false,id:"blq-morepanel"}),X,W=function(){U.hide();V.removeClass("blq-morepanel-shown");unbind(X);return false},Z=function(){if(U.isShown){return false}U.show();V.addClass("blq-morepanel-shown");setTimeout(function(){X=R(document,"click",Y)},0);return false};T.css({visibility:""});U.container.addClass("blq-overlay").addClass("blq-gvl-3").addClass("blq-rst").appendTo("#blq-container-inner");R("#blq-nav-m a","click",Z);function Y(a){if(a.source!=U.container[0]&&!F(a.source).isWithin(U.container)){W()}}},mapPublicApi:function(){if(!window.blqOnDomReady){window.blqOnDomReady=H.ready}},addAutosuggest:function(){var S=this;if(!blq.suggest){blq.suggest=function(T){if(S.suggestion&&S.suggestion._pendingRequest){clearTimeout(S.suggestion._pendingRequest._timeout)}S.suggestion._pendingRequest=null;S.suggestion.setData(T[1]||[]);S.suggestion.find()}}H.ready(function(){var T=document.getElementById("blq-search");if(!T){return false}T.setAttribute("autocomplete","off");T.onfocus=function(){if(document.getElementById("blq-autosuggest")){return false}gloaddisableder.loaddisabled(["glow","1","glow.dom","glow.net","glow.widgets.AutoSuggest"],{async:true,onLoad:function(U){U.ready(function(){var X=U.dom.get;var W=X("#blq-mast input").filter(function(Y){return X(this).attr("name")=="scope"});W=(W.length)?W.attr("value"):"all";S.noData=false;var V=U.dom.get("#blq-container-inner").hasClass("blq-rtl");S.suggestion=new U.widgets.AutoSuggest("#blq-search",[],{index:"title",maxListLength:blq.suggest_short?3:6,activeOnShow:false,useCache:true,formatItem:function(Z){var Y=Z.title;if(Y.length>28){Y=Z.title.substring(0,25)+"...";Y+='<span class="blq-hide">'+Z.title.substring(25,Z.title.length)+"</span>"}return Y},isMatch:function(){return this.data.length?true:false},onInputChange:function(a){a.preventDefault();if(this.noData){return false}U.dom.get("#suggid").remove();if(this._pendingRequest){this._pendingRequest.abort()}var Z=this;var Y=U.data.encodeUrl({q:a.value,scope:W,format:"blq-1",callback:"blq.suggest"});this._pendingRequest=U.net.loaddisabledScript(this.searchHost+"/suggest?"+Y,{useCache:true,charset:"utf-8",onError:function(){Z.inputElement.attr("autocomplete","on");Z.noData=true},timeout:5});U.dom.get("#blq-search-btn").addClass("loaddisableding")},onDataError:function(Y){this.inputElement.attr("autocomplete","on")},onItemSelect:function(a){this.setValue(a.selectedItem.title);var Y=U.dom.get("#suggid");if(!Y.length){Y=U.dom.create('<input type="hidden" name="suggid" id="suggid" />');U.dom.get("#blq-mast form").prepend(Y)}Y.val(a.selectedItem.id);var Z=U.dom.get("#blq-mast form");Z[0].submit()}});S.suggestion.searchHost=S.searchHost||"httpdisabled://search.bbc.co.uk";S.suggestion.overlay.container.attr("id","blq-autosuggest");S.suggestion.overlay.container.addClass("blq-rst");if(V){S.suggestion.overlay.container.addClass("blq-rtl")}S.suggestion.overlay.opts.hideWindowedFlash=false;U.events.addListener(S.suggestion,"show",function(){U.dom.get("#blq-search-btn").removeClass("loaddisableding")})})}});T.onfocus=function(){}}})},setARIAValues:function(){F("#blq-acc").attr("role","navigation");F("#blq-search").attr("role","search");F("#blq-local-nav").attr("role","navigation");F("#blq-content").attr("role","main");F("#blq-nav-main").attr("role","navigation");F("#blq-nav").attr("role","navigation");F("#blq-foot").attr("role","contentinfo")},defaultGoTracking:function(){E("blq-acc",{go:"{id}3/{dir}"});E("blq-mast",{go:"{id}3/{dir}"});E("blq-nav",{go:"{id}3/{dir}"});E("blq-disclaim",{go:"{id}3/{dir}"});E("blq-sitelinks",{go:"{id}3/{count}/{dir}"});E("blq-bbclinks",{go:"{id}3/{dir}"});E("blq-nav-links",{go:"{id}3/{dir}"});E("blq-main",{external:true});if(blq.externalGoTrackingConfig){for(var U in blq.externalGoTrackingConfig){var T=blq.externalGoTrackingConfig[U];var S=H.dom.get(U);if(S.length){E(S,{go:T,external:true})}}}}};function C(){return(document.getElementById&&document.getElementsByTagName)}function E(V,f){var V=document.getElementById(V)||V,f=f||{},W=V.nodeName=="A"?[V]:V.length?V:V.getElementsByTagName("a"),k=f.external||false,h=f.path||window.location.toString().split("bbc.co.uk/")[1],d=V.id?V.id.replace(/-/g,"/"):"_auto",b=f.go||"{path}/int/{id}/{dir}",m=f.currentServer||window.location.href.split("//")[1].split("/")[0];for(var n=0;n<W.length;n++){var X=false,o=false;if((typeof W[n]!="object")||(!W[n].href)||W[n].className.indexOf("blq-nogo")!=-1||W[n].href.indexOf("/go/")!=-1||W[n].href.charAt(0)=="#"||W[n].href.charAt(window.location.toString().split("#")[0].length)=="#"||W[n].href.indexOf("mailto:")==0||W[n].href.indexOf("javascript:")==0||W[n].href.indexOf("itpc:")==0||W[n].href.indexOf("zune:")==0||W[n].href.indexOf("zcast:")==0){continue}if(W[n].href.indexOf("bbc.co.uk")!=-1&&W[n].href.indexOf("#")!=-1){if(W[n].href.indexOf(h+"#")!=-1){continue}}var c=m.replace(/\./g,"\\."),j=W[n].href.split("?")[0],l=new RegExp("^[A-Za-z]+:\\/\\/(?:[^.]+\\.)*(?:bbc\\.co\\.uk|doubleclick\\.net|"+c+")");if(!l.test(j)){if(f.go){var g=j.split("/")[2],X=true,T="/"+b.replace("{dir}",g).replace("{count}",n+1).replace("{path}",h).replace("{id}",d).replace("#","_")}else{var Y=location.pathname,X=true,T=Y+(Y.charAt(Y.length-1)=="/"?"":"/")+"ext/_auto"}}else{if(k){continue}else{var e=j.split("/"),T=b,S=e.length<5?e[e.length-1]||e[e.length-2]:e[e.length-2]||e[e.length-1];T=T.replace("{dir}",S);T=T.replace("{count}",n+1);T=T.replace("{path}",h);T=T.replace("{id}",d);T=T.replace("#","_");T="/"+T}}var Z=W[n].onclick,a,U=false;if(j.indexOf("www.bbc.co.uk")!=-1){a="httpdisabled://www.bbc.co.uk/go"+T+"/-/"+W[n].href.substring(W[n].href.indexOf("bbc.co.uk/")+10,W[n].href.length)}else{if(W[n].href.indexOf("www.bbc.com")!=-1){a="httpdisabled://www.bbc.com/go"+T+"/-/"+W[n].href.substring(W[n].href.indexOf("httpdisabled://www.bbc.com/"),W[n].href.length)}else{if(X||W[n].href.indexOf(m)==-1){a="/go"+T+"/-/"+W[n].href}else{a="/go"+T+"/-/"+W[n].href.substring(W[n].href.indexOf(m)+(m.length+1),W[n].href.length)}}}if(!W[n].blqGoTrackingHref){W[n].onclick=(function(){var i=Z;return function(){this.href=this.blqGoTrackingHref;if(typeof i=="function"){i()}}})()}W[n].blqGoTrackingHref=a}}function B(S){if(I[S]){delete I[S]}if(S=="addGoTrack"||S=="defaultGoTracking"){I.addGoTrack=function(){};I.addGoTrack.isStub=true}}function Q(){return N}function J(S){N=S}function K(S){return A[S]}function M(S,T){A[S]=T}function O(S,T){P[S]=T}function D(U,S){if(U.createTextRange){var T=U.createTextRange();T.moveStart("character",S);T.moveEnd("character",S-U.value.length);T.select()}else{if(U.selectionStart){U.focus();U.setSelectionRange(S,S)}else{U.focus()}}}function L(T){if(C()){H=T,F=T.dom.get,R=T.events.addListener;unbind=T.events.removeListener;for(var S in I){I[S]()}}}var I=(function(){return G})();window.blq={addGoTrack:E,disableFeature:B,environment:Q,setEnvironment:J,setLabel:O,flagpole:K,setFlagpole:M,availableFeatures:I};if(window.gloaddisableder){document.documentElement.className+=" blq-js";gloaddisableder.loaddisabled(["glow","1","glow.dom","glow.widgets.Panel"],{async:true,onLoad:function(S){S.ready(function(){L(S)})}})}})();var demi=(function(){var C=false,B=[],A=null;return{_reset:function(){C=false;B=[];A=null},_loaddisableded:function(){while(B.length>0){demi.getDevice(B.shift(),blq.environment())}},_addScriptTag:function(F){var D=document.getElementsByTagName("head")[0];var E=document.createElement("script");E.type="text/javascript";E.src=F;D.insertBefore(E,D.firstChild)},_setSource:function(D){A=D},getDevice:function(D){B.push(D);if(!C){C=true;demi._addScriptTag(A)}}}})();