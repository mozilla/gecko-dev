diff --git a/expat/lib/xmlparse.c b/expat/lib/xmlparse.c
--- a/expat/lib/xmlparse.c	2024-09-12 17:12:56
+++ b/expat/lib/xmlparse.c	2024-09-12 17:13:18
@@ -2673,6 +2673,13 @@
 }
 /* END MOZILLA CHANGE */

+/* BEGIN MOZILLA CHANGE (Report whether the parser is currently expanding an entity) */
+XML_Bool XMLCALL
+MOZ_XML_ProcessingEntityValue(XML_Parser parser) {
+  return parser->m_openInternalEntities != NULL;
+}
+/* END MOZILLA CHANGE */
+
 XML_Bool XMLCALL
 XML_SetReparseDeferralEnabled(XML_Parser parser, XML_Bool enabled) {
   if (parser != NULL && (enabled == XML_TRUE || enabled == XML_FALSE)) {
