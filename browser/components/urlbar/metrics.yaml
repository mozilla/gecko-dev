# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# Adding a new metric? We have docs for that!
# https://firefox-source-docs.mozilla.org/toolkit/components/glean/user/new_definitions_file.html

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0
$tags:
  - "Firefox :: Address Bar"

urlbar:
  abandonment:
    type: event
    description: Recorded when the user abandons a search (blurring the urlbar).
    extra_keys:
      abandonment_type:
        description: >
          Records the reason that resulted in an abandonment. The possible
          values are: `blur` and `tab_switch`.
        type: string
      sap:
        description: >
          `sap` is the meaning of `search access point`. It records where the
          user started the search action from. The possible values are: `urlbar`
          , `handoff`, `urlbar_newtab` and `urlbar_addonpage`.
        type: string
      interaction:
        description: >
          How the user started the search action. The possible values are:
          `typed`, `pasted`, `topsite_search` (clicked on a topsite search
          shortcut), `topsites` (selected a topsite result with empty search
          string), `returned` (The user abandoned a search, then returned to it)
          , `restarted` (The user abandoned a search, then returned to it,
          cleared it and typed a completely different string), `refined` (The
          user abandoned a search, then returned to it, and partially modified
          the string), `persisted_search_terms` (The user returned to a previous
          successful search that persisted terms in the urlbar),
          `persisted_search_terms_restarted` (The user returned to a previous
          successful search that persisted terms in the urlbar, then cleared it
          and typed a completely different string) and
          `persisted_search_terms_refined` (The user returned to a previous
          successful search that persisted terms in the urlbar, and partially
          modified the string).
        type: string
      search_mode:
        description: >
          If the urlbar is in search mode, thus restricting results to a
          specific search engine or local source, this is set to the search mode
          source. The possible sources are: `actions`, `bookmarks`, `history`,
          `search_engine`, and `tabs`. If search mode is active but the source
          did not fall into any of these categories, this will be `unknown`. If
          search mode is not active, this will be an empty string.
        type: string
      search_engine_default_id:
        description: >
          The telemetry id of the search engine.
          Reflects `search.engine.default.engine_id`.
        type: string
      n_chars:
        description: >
          The length of string used for the search. It includes whitespaces.
        type: quantity
      n_words:
        description: >
          The length of words used for the search. The words are made by
          splitting the search string by whitespaces, thus this doesn’t support
          CJK languages. For performance reasons a maximum of 255 characters are
          considered when splitting.
        type: quantity
      n_results:
        description: >
          The number of results shown to the user. If this is high the results
          list below may be truncated due to technical limitations. Also note in
          that case not all the results may be physically visible due to the
          screen size limitation.
        type: quantity
      groups:
        description: >
          Comma separated list of result groups in the order they were shown to
          the user. The groups may be repeated, since the list will match 1:1
          the results list, so we can link each result to a group. The possible
          group names are: `heuristic`, `adaptive_history`, `search_history`,
          `search_suggest`, `search_suggest_rich`, `trending_search`,
          `trending_search_rich`, `top_pick`, `top_site`, `remote_tab`,
          `addon`, `general`, `suggest`, `about_page`, `suggested_index`, and
          `restrict_keyword`.
          If the group did not fall into any of these,
          this will be `unknown` and a bug should be filed to investigate it.
        type: string
      results:
        description: >
          Comma separated list of result types in the order they were shown to
          the user. The `unknown` type should not occur and indicates a bug. The
          possible types are:
          `action`,
          `addon`,
          `autofill_about`,
          `autofill_adaptive`,
          `autofill_origin`,
          `autofill_unknown`,
          `autofill_url`,
          `bookmark`,
          `calc`,
          `clipboard`,
          `fxsuggest_data_sharing_opt_in`,
          `history`,
          `intervention_clear`,
          `intervention_refresh`,
          `intervention_unknown`,
          `intervention_update`,
          `keyword`,
          `merino_adm_sponsored`,
          `merino_amo`,
          `merino_top_picks`,
          `merino_wikipedia`,
          `recent_search`,
          `remote_tab`,
          `restrict_keyword_actions`,
          `restrict_keyword_bookmarks`,
          `restrict_keyword_history`,
          `restrict_keyword_tabs`,
          `rs_adm_nonsponsored`,
          `rs_adm_sponsored`,
          `rs_amo`,
          `rs_mdn`,
          `rs_pocket`,
          `rust_adm_nonsponsored`,
          `rust_adm_sponsored`,
          `rust_amo`,
          `rust_exposure`,
          `rust_fakespot_amazon`,
          `rust_fakespot_bestbuy`,
          `rust_fakespot_other`,
          `rust_fakespot_walmart`,
          `rust_mdn`,
          `rust_pocket`,
          `rust_yelp`,
          `search_engine`,
          `search_history`,
          `search_suggest`,
          `search_suggest_rich`,
          `tab`,
          `tab_to_search`,
          `tip_dismissal_acknowledgment`,
          `tip_onboard`,
          `tip_redirect`,
          `tip_unknown`,
          `top_site`,
          `trending_search`,
          `trending_search_rich`,
          `unit`,
          `url`,
          `weather`
        type: string
      actions:
        description: >
          Comma separated list of actions keys in the order they were shown to
          the user. Possible keys are: `addons`, `bookmarks`, `clear`, `downloads`,
          `extensions`, `inspect`, `logins`, `plugins`, `print`, `private`,
          `refresh`, `restart`, `savepdf`, `screenshot`, `settings`, `tabswitch`,
          `themes`, `update`, `viewsource`.
          If there is no action shown in a position that is denoted with `none`.
        type: string
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1800414
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1805717
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1842247
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1917992
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1800414#c2
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1805717#c4
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1842247#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1917992
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never

  engagement:
    type: event
    description: Recorded when the user executes an action on a result.
    extra_keys:
      sap:
        description: >
          `sap` is the meaning of `search access point`. It records where the
          user started the search action from. The possible values are: `urlbar`
          , `handoff`, `urlbar_newtab` and `urlbar_addonpage`.
        type: string
      interaction:
        description: >
          How the user started the search action. The possible values are:
          `typed`, `pasted`, `topsite_search` (clicked on a topsite search
          shortcut), `topsites` (selected a topsite result with empty search
          string), `returned` (The user abandoned a search, then returned to it)
          , `restarted` (The user abandoned a search, then returned to it,
          cleared it and typed a completely different string), `refined` (The
          user abandoned a search, then returned to it, and partially modified
          the string), `persisted_search_terms` (The user returned to a previous
          successful search that persisted terms in the urlbar),
          `persisted_search_terms_restarted` (The user returned to a previous
          successful search that persisted terms in the urlbar, then cleared it
          and typed a completely different string) and
          `persisted_search_terms_refined` (The user returned to a previous
          successful search that persisted terms in the urlbar, and partially
          modified the string).
        type: string
      search_mode:
        description: >
          If the urlbar is in search mode, thus restricting results to a
          specific search engine or local source, this is set to the search mode
          source. The possible sources are: `actions`, `bookmarks`, `history`,
          `search_engine`, and `tabs`. If search mode is active but the source
          did not fall into any of these categories, this will be `unknown`. If
          search mode is not active, this will be an empty string.
        type: string
      search_engine_default_id:
        description: >
          The telemetry id of the search engine.
          Reflects `search.engine.default.engine_id`.
        type: string
      n_chars:
        description: >
          The length of string used for the search. It includes whitespaces.
        type: quantity
      n_words:
        description: >
          The length of words used for the search. The words are made by
          splitting the search string by whitespaces, thus this doesn’t support
          CJK languages. For performance reasons a maximum of 255 characters are
          considered when splitting.
        type: quantity
      n_results:
        description: >
          The number of results shown to the user. If this is high the results
          list below may be truncated due to technical limitations. Also note in
          that case not all the results may be physically visible due to the
          screen size limitation.
        type: quantity
      selected_result:
        description: >
          The type of the result the user selected. The `unknown` type should
          not occur and indicates a bug. The possible types are:
          `action`,
          `addon`,
          `autofill_about`,
          `autofill_adaptive`,
          `autofill_origin`,
          `autofill_unknown`,
          `autofill_url`,
          `bookmark`,
          `calc`,
          `clipboard`,
          `experimental_addon`,
          `fxsuggest_data_sharing_opt_in`,
          `history`,
          `input_field`,
          `intervention_clear`,
          `intervention_refresh`,
          `intervention_unknown`,
          `intervention_update`,
          `keyword`,
          `merino_adm_sponsored`,
          `merino_amo`,
          `merino_top_picks`,
          `merino_wikipedia`,
          `recent_search`,
          `remote_tab`,
          `restrict_keyword_actions`,
          `restrict_keyword_bookmarks`,
          `restrict_keyword_history`,
          `restrict_keyword_tabs`,
          `rs_adm_nonsponsored`,
          `rs_adm_sponsored`,
          `rs_amo`,
          `rs_mdn`,
          `rs_pocket`,
          `rust_adm_nonsponsored`,
          `rust_adm_sponsored`,
          `rust_amo`,
          `rust_exposure`,
          `rust_fakespot_amazon`,
          `rust_fakespot_bestbuy`,
          `rust_fakespot_other`,
          `rust_fakespot_walmart`,
          `rust_mdn`,
          `rust_pocket`,
          `rust_yelp`,
          `search_engine`,
          `search_history`,
          `search_shortcut_button`,
          `search_suggest`,
          `search_suggest_rich`,
          `site_specific_contextual_search`,
          `tab`,
          `tab_to_search`,
          `tip_dismissal_acknowledgment`,
          `tip_onboard`,
          `tip_redirect`,
          `tip_unknown`,
          `top_site`,
          `trending_search`,
          `trending_search_rich`,
          `unit`,
          `url`,
          `weather`
          If the user has selected an action this will be set with an action
          prefix as followed
          `action_*`
          Where the wildcard(*) will be replaced by one of the values
          documented in the actions field.
        type: string
      selected_position:
        description: >
          The 1-based index of the result the user selected. If user searched
          without selection, 0 will be recorded.
        type: quantity
      provider:
        description: >
          The name of the `UrlbarProvider` that provided the selected result.
          The possible values are: `AboutPages`, `AliasEngines`, `Autofill`,
          `BookmarkKeywords`, `calculator`, `UrlbarProviderContextualSearch`,
          `HeuristicFallback`, `HistoryUrlHeuristic`, `InputHistory`,
          `UrlbarProviderInterventions`, `Omnibox`, `OpenTabs`, `Places`,
          `PrivateSearch`, `quickactions`, `UrlbarProviderQuickSuggest`,
          `RemoteTabs`, `SearchSuggestions`, `UrlbarProviderSearchTips`,
          `TabToSearch`, `TokenAliasEngines`, `UrlbarProviderTopSites`,
          `UnitConversion` and `UnifiedComplete`.
          If engagement_type is `drop_go` or `paste_go`, this will be null
          because no results are shown. And also, if selected_result is
          `experimental_addon`, it means that the user selected a result
           from an add-on using the urlbar experimental API. In this case,
           this will be the provider name specified by the add-on.
        type: string
      engagement_type:
        description: >
          Records how the user selected the result. The possible values are:
          `click`,
          `dismiss`,
          `drop_go`,
          `enter`,
          `go_button`,
          `help`,
          `inaccurate_location`,
          `manage`,
          `not_interested`,
          `not_relevant`,
          `paste_go`,
          `show_less_frequently`
        type: string
      groups:
        description: >
          Comma separated list of result groups in the order they were shown to
          the user. The groups may be repeated, since the list will match 1:1
          the results list, so we can link each result to a group. The possible
          group names are: `heuristic`, `adaptive_history`, `search_history`,
          `search_suggest`, `search_suggest_rich`, `trending_search`,
          `trending_search_rich`, `top_pick`, `top_site`, `recent_search`,
          `remote_tab`, `addon`, `general`, `suggest`, `about_page`,
          `suggested_index`, and `restrict_keyword`.
          If the group did not fall into any of these, this will be `unknown`
          and a bug should be filed to investigate it. If engagement_type is
          `drop_go` or `paste_go`, this  will be empty string because no results
          are shown.
        type: string
      results:
        description: >
          Comma separated list of result types in the order they were shown to
          the user. The `unknown` type should not occur and indicates a bug. The
          possible types are:
          `action`,
          `addon`,
          `autofill_about`,
          `autofill_adaptive`,
          `autofill_origin`,
          `autofill_unknown`,
          `autofill_url`,
          `bookmark`,
          `calc`,
          `clipboard`,
          `fxsuggest_data_sharing_opt_in`,
          `history`,
          `intervention_clear`,
          `intervention_refresh`,
          `intervention_unknown`,
          `intervention_update`,
          `keyword`,
          `merino_adm_sponsored`,
          `merino_amo`,
          `merino_top_picks`,
          `merino_wikipedia`,
          `recent_search`,
          `remote_tab`,
          `restrict_keyword_actions`,
          `restrict_keyword_bookmarks`,
          `restrict_keyword_history`,
          `restrict_keyword_tabs`,
          `rs_adm_nonsponsored`,
          `rs_adm_sponsored`,
          `rs_amo`,
          `rs_mdn`,
          `rs_pocket`,
          `rust_adm_nonsponsored`,
          `rust_adm_sponsored`,
          `rust_amo`,
          `rust_exposure`,
          `rust_fakespot_amazon`,
          `rust_fakespot_bestbuy`,
          `rust_fakespot_other`,
          `rust_fakespot_walmart`,
          `rust_mdn`,
          `rust_pocket`,
          `rust_yelp`,
          `search_engine`,
          `search_history`,
          `search_suggest`,
          `search_suggest_rich`,
          `tab`,
          `tab_to_search`,
          `tip_dismissal_acknowledgment`,
          `tip_onboard`,
          `tip_redirect`,
          `tip_unknown`,
          `top_site`,
          `trending_search`,
          `trending_search_rich`,
          `unit`,
          `url`,
          `weather`
        type: string
      actions:
        description: >
          Comma separated list of actions keys in the order they were shown to
          the user. Possible keys are: `addons`, `bookmarks`, `clear`, `downloads`,
          `extensions`, `inspect`, `logins`, `plugins`, `print`, `private`,
          `refresh`, `restart`, `savepdf`, `screenshot`, `settings`, `tabswitch`,
          `themes`, `update`, `viewsource`.
          If there is no action shown in a position that is denoted with `none`.
        type: string
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1797265
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1805717
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1842247
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1797265#c3
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1805717#c4
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1842247#c3
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never

  fakespot_engagement:
    type: event
    description: >
      Recorded when the user engages with a Fakespot suggestion.
    extra_keys:
      grade:
        description: >
          The Fakespot grade: "A", "B", etc.
        type: string
      rating:
        description: >
          The Fakespot rating: "4.1", "5.0", etc.
        type: string
      provider:
        description: >
          The product provider: "amazon", "bestbuy", "walmart"
        type: string
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1907990
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1907990
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never

  exposure:
    type: event
    description: >
      Recorded when client is exposed to urlbar experiment results.
    extra_keys:
      results:
        description: >
          Comma separated list of results that were exposed to the user.
        type: string
      terminal:
        description: >
          Comma separated list of booleans that indicates whether the results
          were present at the end of the urlbar session. This list is parallel
          to the `results` list. i.e., the boolean at index i is true if the
          result at index i was present at the end of the session. For example,
          if `results` is "bookmark,history,search_suggest" and the bookmark was
          not present at the end of the session, the history result was present,
          and the search suggestion was not present, then `terminal` will be
          "false,true,false".
        type: string
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1819766
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1918299
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1819766#c9
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never

  keyword_exposure:
    type: event
    description: >
      When keyword exposures are enabled, this event is recorded in the
      `urlbar-keyword-exposure` ping, which is submitted at the end of urlbar
      sessions during which one or more exposure results are matched. The ping
      will contain one `keyword_exposure` event for each instance where a result
      is matched during the session. See the `urlbar-keyword-exposure` ping for
      details.
    extra_keys:
      result:
        type: string
        description: >
          The type of result that was matched.
      keyword:
        type: string
        description: >
          The keyword that matched the result.
      terminal:
        type: boolean
        description: >
          Whether the matched result and keyword were present at the end of the
          urlbar session. If true, the session ended with them. If false, the
          result and keyword were matched at some point during the session but
          the session did not end with them.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1881875
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1915507
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1881875
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1915507
    data_sensitivity:
      - stored_content
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - urlbar-keyword-exposure

  quick_suggest_contextual_opt_in:
    type: event
    description: >
      Recorded when the contextual opt-in UI is shown or interacted with.
    extra_keys:
      interaction:
        description: >
          The type of interaction. Possible values: `impression`, `dismiss`,
          `allow`, `learn_more`.
        type: string
      top_position:
        description: >
          Whether the opt-in result appeared at the very top of results or at
          the bottom, after one-off buttons.
        type: boolean
      say_hello:
        description: >
          Whether the alternative copy was used for the opt-in result.
        type: boolean
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1852058
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1852058#c2
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1866204#c8
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1892377#c2
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1912174#c8
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: 136

  pref_max_results:
    lifetime: application
    type: quantity
    unit: integer
    description: >
      Maximum results to show in the Address Bar.
      Corresponds to the value of the `browser.urlbar.maxRichResults` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817196
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817196
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - events

  pref_suggest_data_collection:
    lifetime: application
    type: boolean
    description: >
      Whether the user has opted in to data collection for Firefox Suggest,
      i.e., online suggestions served from Merino.
      Corresponds to the value of the
      `browser.urlbar.quicksuggest.dataCollection.enabled` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1849726
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - events

  pref_suggest_nonsponsored:
    lifetime: application
    type: boolean
    description: >
      Whether non-sponsored quick suggest results are shown in the urlbar.
      Corresponds to the value of the
      `browser.urlbar.suggest.quicksuggest.nonsponsored` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1849726
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - events

  pref_suggest_sponsored:
    lifetime: application
    type: boolean
    description: >
      Whether sponsored quick suggest results are shown in the urlbar.
      Corresponds to the value of the
      `browser.urlbar.suggest.quicksuggest.sponsored` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1849726
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1847855
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - events

  pref_suggest_topsites:
    lifetime: application
    type: boolean
    description: >
      Whether topsite results are enabled in the urlbar.
      Corresponds to the value of the `browser.urlbar.suggest.topsites` pref.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817196
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1817196
    data_sensitivity:
      - interaction
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    send_in_pings:
      - events

  quick_suggest_ingest_time:
    type: timing_distribution
    time_unit: millisecond
    description: >
      Counts how long each successful ingest takes in the Firefox Suggest Rust
      component. Ingests that fail for whatever reason are not included.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1907227
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1907227
    data_sensitivity:
      - technical
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never

  # The _count suffix is to disambiguate with the event of the same name.
  abandonment_count:
    type: counter
    description: >
      A uint recording the number of abandoned engagements in the urlbar.
      An abandonment occurs when the user begins using the urlbar but
      stops before completing the engagement. This can happen when the
      user clicks outside the urlbar to focus a different part of the
      window. It can also happen when the user switches to another window
      while the urlbar is focused.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.abandonment.
    bugs:
      - https://bugzil.la/1752953
    data_reviews:
      - https://bugzil.la/1752953
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_ABANDONMENT

  autofill_deletion:
    type: counter
    description: >
      A uint recording the deletion count for autofilled string in the
      urlbar. This occurs when the user deletes whole autofilled string by
      BACKSPACE or DELETE key while the autofilled string is selected.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.autofill_deletion.
    bugs:
      - https://bugzil.la/1815342
    data_reviews:
      - https://bugzil.la/1815342
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_AUTOFILL_DELETION

  # The _count suffix is to disambiguate with the event of the same name.
  engagement_count:
    type: counter
    description: >
      A uint recording the number of engagements the user completes in the
      urlbar.  An engagement occurs when the user navigates to a page
      using the urlbar, for example by picking a result in the urlbar
      panel or typing a search term or URL in the urlbar and pressing the
      enter key.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.engagement.
    bugs:
      - https://bugzil.la/1752953
    data_reviews:
      - https://bugzil.la/1752953
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_ENGAGEMENT

  tips:
    type: labeled_counter
    description: >
      A keyed uint recording how many times particular tips are shown in
      the Urlbar and how often their confirm and help buttons are pressed.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.tips.
    bugs:
      - https://bugzil.la/1608461
    data_reviews:
      - https://bugzil.la/1608461
    notification_emails:
      - fx-search-telemetry@mozilla.com
      - adw@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_TIPS

# Replacement for PingCentre "quicksuggest-block|impression|click" pings.
quick_suggest:
  ping_type:
    type: string
    description: >
      The ping's type. In other situations might be designated by an event's
      name or an interaction field. E.g. "quicksuggest-impression",
      "quicksuggest-block", "quicksuggest-click".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  position:
    type: quantity
    unit: QuickSuggest position
    description: >
      The position (1-based) of the QuickSuggest item being interatcted with.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  suggested_index:
    type: string
    description: >
      A stringified integer value that is the intended index of the suggestion
      being interacted with. If `suggested_index_relative_to_group` is true, the
      index is relative to the "Firefox Suggest" group; otherwise the index is
      relative to the entire list of suggestions. Non-negative values (starting
      at 0) are relative to the start/top of the group/list; negative values are
      relative to the end/bottom of the group/list.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854755
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854755
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  suggested_index_relative_to_group:
    type: boolean
    description: >
      Whether `suggested_index` is relative to the "Firefox Suggest" group. If
      false, it is relative to the entire list of suggestions.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854755
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1854755
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  source:
    type: string
    description: >
      The source of the interaction. E.g. "urlbar".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  match_type:
    type: string
    description: >
      Whether this was a best/top match or not. Either "best-match" or
      "firefox-suggest".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  block_id:
    type: string
    description: >
      A unique identifier for the suggestion (a.k.a. a keywords block).
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  improve_suggest_experience:
    type: boolean
    description: >
      Whether the "Improve Suggest Experience" checkbox is checked.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  advertiser:
    type: string
    description: >
      The name of the advertiser providing the sponsored TopSite.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  request_id:
    type: string
    description: >
      A request identifier for each API request to
      [Merino](https://mozilla-services.github.io/merino/).
      Only present for suggestions provided by Merino.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  is_clicked:
    type: boolean
    description: >
      Whether this quicksuggest-impression ping was for an item that was
      clicked.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  reporting_url:
    type: url
    description: >
      The url to report this interaction to.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  context_id:
    type: uuid
    description: >
      An identifier to identify users for Contextual Services user interaction pings.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - technical
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

  iab_category:
    type: string
    description: >
      The suggestion's category. Either "22 - Shopping" or "5 - Educational".
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1836283
    data_sensitivity:
      - interaction
      - web_activity
    notification_emails:
      - najiang@mozilla.com
    expires: never
    send_in_pings:
      - quick-suggest

# Metrics from the Rust suggest component.
#
# We can't record metrics from Rust directly.  To work around that we:
#   - Define the metrics here.
#   - Define API calls in Rust suggest component that return the metrics
#     alongside the normal results.
#   - Record the metrics in the JS code in this component

suggest:
  ingest_time:
    type: labeled_timing_distribution
    description: Time for ingestion (excluding download time), labelled by record type
    time_unit: microsecond
    labels:
      - icon
      - data
      - amo-suggestions
      - pocket-suggestions
      - yelp-suggestions
      - mdn-suggestions
      - weather
      - configuration
      - amp-mobile-suggestions
      - fakespot-suggestions
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1908397
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1911664
    notification_emails:
      - disco-team@mozilla.com
      - bdk@mozilla.com
    expires: "never"
    data_sensitivity:
      - technical

  ingest_download_time:
    type: labeled_timing_distribution
    description: Download time for ingestion, labelled by record type
    time_unit: microsecond
    labels:
      - icon
      - data
      - amo-suggestions
      - pocket-suggestions
      - yelp-suggestions
      - mdn-suggestions
      - weather
      - configuration
      - amp-mobile-suggestions
      - fakespot-suggestions
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1908397
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1911664
    notification_emails:
      - disco-team@mozilla.com
      - bdk@mozilla.com
    expires: "never"
    data_sensitivity:
      - technical

  query_time:
    type: labeled_timing_distribution
    description: Time executing queries, labelled by provider type
    time_unit: microsecond
    labels:
      - amp
      - ampmobile
      - wikipedia
      - amo
      - pocket
      - yelp
      - mdn
      - weather
      - fakespot
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1908397
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1911664
    notification_emails:
      - disco-team@mozilla.com
      - bdk@mozilla.com
    expires: "never"
    data_sensitivity:
      - technical

# Relevance scoring & ranking metrics for Firefox Suggest.
# This feature is still in the experimentation phase and all the metrics are
# set to expire by 136 for now.
suggest_relevance:
  status:
    type: labeled_counter
    description: >
      Count the successful / failed attempts of relevance scoring in
      Firefox Suggest.
    labels:
      - success
      - failure
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1926315
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1926315
    notification_emails:
      - disco-team@mozilla.com
      - najiang@mozilla.com
    expires: 136
    data_sensitivity:
      - technical
  outcome:
    type: labeled_counter
    description: >
      For each successful scoring, count whether the relevance score gets
      boosted or decreased over the original score. Note that given how the
      score is calculated, it's practically impossible to have the two scores
      tied. If that's the case anyhow, it will increment the "boosted" counter.
    labels:
      - boosted
      - decreased
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1926315
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1926315
    notification_emails:
      - disco-team@mozilla.com
      - najiang@mozilla.com
    expires: 136
    data_sensitivity:
      - technical

urlbar.picked:
  autofill_about:
    type: labeled_counter
    description: >
      Counts how many times an about-page autofill result (e.g.,
      "about:config") was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.autofill_about.
    bugs:
      - https://bugzil.la/1770483
    data_reviews:
      - https://bugzil.la/1770483
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_AUTOFILL_ABOUT

  autofill_adaptive:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.autofill_adaptive.
    bugs:
      - https://bugzil.la/1597791
    data_reviews:
      - https://bugzil.la/1597791
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_AUTOFILL_ADAPTIVE

  autofill_origin:
    type: labeled_counter
    description: >
      Counts how many times an origin (domain) autofill result (e.g.,
      "mozilla.org") was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.autofill_origin.
    bugs:
      - https://bugzil.la/1597791
    data_reviews:
      - https://bugzil.la/1597791
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_AUTOFILL_ORIGIN

  autofill_other:
    type: labeled_counter
    description: >
      Counts how many times some other type of autofill result that does
      not have a specific keyed scalar was picked at a given index. This
      is a fallback that is used when the code is not properly setting a
      specific autofill type, and it should not normally be used. If it
      appears in the data, it means we need to investigate and fix the
      code that is not properly setting a specific autofill type.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.autofill_other.
    bugs:
      - https://bugzil.la/1770483
    data_reviews:
      - https://bugzil.la/1770483
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_AUTOFILL_OTHER

  autofill_url:
    type: labeled_counter
    description: >
      Counts how many times a URL autofill result (e.g.,
      "mozilla.org/firefox") was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.autofill_url.
    bugs:
      - https://bugzil.la/1597791
    data_reviews:
      - https://bugzil.la/1597791
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_AUTOFILL_URL

  bookmark:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.bookmark.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_BOOKMARK

  bookmark_adaptive:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.bookmark_adaptive.
    bugs:
      - https://bugzil.la/1466103
    data_reviews:
      - https://bugzil.la/1466103
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_BOOKMARK_ADAPTIVE

  clipboard:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.clipboard.
    bugs:
      - https://bugzil.la/1842247
    data_reviews:
      - https://bugzil.la/1842247
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_CLIPBOARD

  dynamic:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.dynamic.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_DYNAMIC

  dynamic_wikipedia:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.dynamic_wikipedia.
    bugs:
      - https://bugzil.la/1819797
    data_reviews:
      - https://bugzil.la/1819797
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_DYNAMIC_WIKIPEDIA

  extension:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.extension.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_EXTENSION

  formhistory:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.formhistory.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_FORMHISTORY

  history:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.history.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_HISTORY

  history_adaptive:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.history_adaptive.
    bugs:
      - https://bugzil.la/1466103
    data_reviews:
      - https://bugzil.la/1466103
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_HISTORY_ADAPTIVE

  keyword:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.keyword.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_KEYWORD

  navigational:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.navigational.
    bugs:
      - https://bugzil.la/1819797
    data_reviews:
      - https://bugzil.la/1819797
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_NAVIGATIONAL

  quickaction:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.quickaction.
    bugs:
      - https://bugzil.la/1783154
    data_reviews:
      - https://bugzil.la/1783154
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_QUICKACTION

  quicksuggest:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.quicksuggest.
    bugs:
      - https://bugzil.la/1761059
    data_reviews:
      - https://bugzil.la/1761059
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_QUICKSUGGEST

  recent_search:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.recent_search.
    bugs:
      - https://bugzil.la/1852848
    data_reviews:
      - https://bugzil.la/1852848
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_RECENT_SEARCH

  remotetab:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.remotetab.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_REMOTETAB

  restrict_keyword_actions:
    type: labeled_counter
    description: >
      Counts how many times this restrict actions result was picked at a
      given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.restrict_keyword_actions.
    bugs:
      - https://bugzil.la/1917992
    data_reviews:
      - https://bugzil.la/1917992
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_RESTRICT_KEYWORD_ACTIONS

  restrict_keyword_bookmarks:
    type: labeled_counter
    description: >
      Counts how many times this restrict bookmarks result was picked at a
      given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.restrict_keyword_bookmarks.
    bugs:
      - https://bugzil.la/1917992
    data_reviews:
      - https://bugzil.la/1917992
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_RESTRICT_KEYWORD_BOOKMARKS

  restrict_keyword_history:
    type: labeled_counter
    description: >
      Counts how many times this restrict history result was picked at a
      given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.restrict_keyword_history.
    bugs:
      - https://bugzil.la/1917992
    data_reviews:
      - https://bugzil.la/1917992
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_RESTRICT_KEYWORD_HISTORY

  restrict_keyword_tabs:
    type: labeled_counter
    description: >
      Counts how many times this restrict tabs result was picked at a
      given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.restrict_keyword_tabs.
    bugs:
      - https://bugzil.la/1917992
    data_reviews:
      - https://bugzil.la/1917992
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_RESTRICT_KEYWORD_TABS

  searchengine:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchengine.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHENGINE

  searchsuggestion:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchsuggestion.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHSUGGESTION

  searchsuggestion_rich:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchsuggestion_rich.
    bugs:
      - https://bugzil.la/1834359
    data_reviews:
      - https://bugzil.la/1834359
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHSUGGESTION_RICH

  switchtab:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.switchtab.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SWITCHTAB

  tabtosearch:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.tabtosearch.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_TABTOSEARCH

  tip:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.tip.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_TIP

  topsite:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.topsite.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_TOPSITE

  trending:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.trending.
    bugs:
      - https://bugzil.la/1823543
    data_reviews:
      - https://bugzil.la/1823543
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_TRENDING

  trending_rich:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.trending_rich.
    bugs:
      - https://bugzil.la/1834359
    data_reviews:
      - https://bugzil.la/1834359
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_TRENDING_RICH

  unknown:
    type: labeled_counter
    description: >
      Counts how many times an unknown result type was picked at a given
      index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.unknown.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_UNKNOWN

  visiturl:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.visiturl.
    bugs:
      - https://bugzil.la/1671508
    data_reviews:
      - https://bugzil.la/1671508
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_VISITURL

  weather:
    type: labeled_counter
    description: >
      Counts how many times this result type was picked at a given index.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.weather.
    bugs:
      - https://bugzil.la/1815699
    data_reviews:
      - https://bugzil.la/1815699
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_WEATHER

urlbar.picked.searchmode:
  bookmarkmenu:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode from
      the Search Bookmarks menu item in the Library menu.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.bookmarkmenu.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_BOOKMARKMENU

  handoff:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      being handed off from the search bar on the new tab page.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.handoff.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_HANDOFF

  keywordoffer:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a keyword offer result.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.keywordoffer.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_KEYWORDOFFER

  oneoff:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a one-off.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.oneoff.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_ONEOFF

  searchbutton:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user entered a particular
      search mode by unified search button.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.searchbutton.
    bugs:
      - https://bugzil.la/1919857
    data_reviews:
      - https://bugzil.la/1919857
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_SEARCHBUTTON

  shortcut:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      pressing a keyboard shortcut.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.shortcut.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_SHORTCUT

  tabmenu:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting the Search Tabs menu item in the Tab Overflow menu.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.tabmenu.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TABMENU

  tabtosearch:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a tab-to-search result.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.tabtosearch.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TABTOSEARCH

  tabtosearch_onboard:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a tab-to-search onboarding result.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.tabtosearch_onboard.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TABTOSEARCH_ONBOARD

  topsites_newtab:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a search shortcut Top Site on the New Tab Page.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.topsites_newtab.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TOPSITES_NEWTAB

  topsites_urlbar:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a search shortcut Top Site in the Urlbar.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.topsites_urlbar.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TOPSITES_URLBAR

  touchbar:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      selecting a search shortcut on the macOS Touch Bar.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.touchbar.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TOUCHBAR

  typed:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode by
      typing an alias.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.typed.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_TYPED

  historymenu:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode from
      the Search History menu item in a History menu.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.historymenu.
    bugs:
      - https://bugzil.la/1736939
    data_reviews:
      - https://bugzil.la/1736939
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_HISTORYMENU

  other:
    type: labeled_counter
    description: >
      A keyed uint recording how many times the user picked a particular
      kind of result while in search mode after entering search mode from
      an unknown entry point. If values appear for this probe in
      Telemetry, we should review the entry points to search mode.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.picked.searchmode.other.
    bugs:
      - https://bugzil.la/1674874
    data_reviews:
      - https://bugzil.la/1674874
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PICKED_SEARCHMODE_OTHER

urlbar.impression:
  autofill_about:
    type: counter
    description: >
      Counts how many times about-page type was autofilled per engagement.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.impression.autofill_about.
    bugs:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    data_reviews:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_IMPRESSION_AUTOFILL_ABOUT
    no_lint:
      - COMMON_PREFIX

  autofill_adaptive:
    type: counter
    description: >
      Counts how many times adaptive history type was autofilled per
      engagement.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.impression.autofill_adaptive.
    bugs:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    data_reviews:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_IMPRESSION_AUTOFILL_ADAPTIVE
    no_lint:
      - COMMON_PREFIX

  autofill_origin:
    type: counter
    description: >
      Counts how many times origin type was autofilled per engagement.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.impression.autofill_origin.
    bugs:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    data_reviews:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_IMPRESSION_AUTOFILL_ORIGIN
    no_lint:
      - COMMON_PREFIX

  autofill_other:
    type: counter
    description: >
      Counts how many times other type was autofilled per engagement.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.impression.autofill_other.
    bugs:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    data_reviews:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_IMPRESSION_AUTOFILL_OTHER
    no_lint:
      - COMMON_PREFIX

  autofill_url:
    type: counter
    description: >
      Counts how many times url type was autofilled per engagement.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.impression.autofill_url.
    bugs:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    data_reviews:
      - https://bugzil.la/1774305
      - https://bugzil.la/1780188
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_IMPRESSION_AUTOFILL_URL
    no_lint:
      - COMMON_PREFIX

urlbar.trending:
  block:
    type: counter
    description: >
      User has blocked seeing trending results.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.trending.block.
    bugs:
      - https://bugzil.la/1848048
    data_reviews:
      - https://bugzil.la/1848048
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_TRENDING_BLOCK

urlbar.tabtosearch:
  impressions:
    type: labeled_counter
    description: >
      A keyed uint recording how many times non-onboarding tab-to-search
      results are shown in the Urlbar for a particular search engine.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.tabtosearch.impressions.
    bugs:
      - https://bugzil.la/1686330
    data_reviews:
      - https://bugzil.la/1686330
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_TABTOSEARCH_IMPRESSIONS

  impressions_onboarding:
    type: labeled_counter
    description: >
      A keyed uint recording how many times onboarding tab-to-search
      results are shown in the Urlbar for a particular search engine.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.tabtosearch.impressions_onboarding.
    bugs:
      - https://bugzil.la/1686330
    data_reviews:
      - https://bugzil.la/1686330
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_TABTOSEARCH_IMPRESSIONS_ONBOARDING

urlbar.persistedsearchterms:
  revert_by_popup_count:
    type: counter
    description: >
      The count of the number of times search terms were removed from the
      urlbar due to a shown PopupNotification. This event can happen when
      a user loads a SERP and a PopupNotification is shown, as well as
      when a user switches away from a tab on a SERP showing a
      PopupNotification and switches back to it.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.persistedsearchterms.revert_by_popup_count.
    bugs:
      - https://bugzil.la/1815971
    data_reviews:
      - https://bugzil.la/1815971
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PERSISTEDSEARCHTERMS_REVERT_BY_POPUP_COUNT

  view_count:
    type: counter
    description: >
      The count of the number of times search terms persisted in the
      Urlbar. This gets recorded after a user loads a SERP that persists
      search terms, or switches back to an existing tab that should be
      showing the persisted search terms in the Urlbar, regardless of
      whether PopupNotification cleared the search terms from the Urlbar.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.persistedsearchterms.view_count.
    bugs:
      - https://bugzil.la/1815971
    data_reviews:
      - https://bugzil.la/1815971
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_PERSISTEDSEARCHTERMS_VIEW_COUNT

urlbar.zeroprefix:
  abandonment:
    type: counter
    description: >
      Counts how many times the zero-prefix urlbar results panel was
      abandoned.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.zeroprefix.abandonment.
    bugs:
      - https://bugzil.la/1806765
    data_reviews:
      - https://bugzil.la/1806765
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_ZEROPREFIX_ABANDONMENT

  engagement:
    type: counter
    description: >
      Counts how many times a result was picked in the zero-prefix urlbar
      results panel.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.zeroprefix.engagement.
    bugs:
      - https://bugzil.la/1806765
    data_reviews:
      - https://bugzil.la/1806765
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_ZEROPREFIX_ENGAGEMENT

  exposure:
    type: counter
    description: >
      Counts how many times the zero-prefix urlbar results panel was shown
      to the user.
      This metric was generated to correspond to the Legacy Telemetry
      scalar urlbar.zeroprefix.exposure.
    bugs:
      - https://bugzil.la/1806765
    data_reviews:
      - https://bugzil.la/1806765
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: URLBAR_ZEROPREFIX_EXPOSURE

urlbar.quickaction:
  picked:
    type: labeled_counter
    description: >
      Counts how many times quickaction results were selected. The key is
      the in the form "actionkey-N" where N is the number of characters
      the user typed to be shown the action.
      This metric was generated to correspond to the Legacy Telemetry
      scalar quickaction.picked.
    bugs:
      - https://bugzil.la/1783155
    data_reviews:
      - https://bugzil.la/1783155
    notification_emails:
      - fx-search-telemetry@mozilla.com
    expires: never
    telemetry_mirror: QUICKACTION_PICKED
