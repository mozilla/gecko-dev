https://bugzilla.mozilla.org/show_bug.cgi?id=1510972

CSC302 GFB Assignment
Reece Martin
2019-10-17


# Overview & Diagnosis
The bug I am rectifying deals with a number	of methods in GeckoView which contain methods used only in an inverted context. The issue here is that there is a potential detrimental impact to performance here, and moreover it generates a number of style warnings (BooleanMethodIsAlwaysInverted) and the like which could act to block other more important warnings. By fixing this bug we will have some methods used in a more logical context, potentially see some performance improvement, and most importantly reduce the number of warnings generated by the affected code.

# Solution
To rectify the bug the solution is straightforward, refactor the affected methods so that their return values are inverted as well as modify the calling code in turn. This involves not only inverting the return values of all the affected methods (over 30) but also renaming them to appropriately convey their new values. Due to the fact that the context of some methods does not seem conducive to inversion, an attempt to consult with the GFB owner was made. We collectively decided a better decision would be to silence the warnings regarding the methods across all the affected files. One solution agreed upon by the triage owner and the GeckoView developers was to silence the warning globally, but after unsuccessfully trying to do this via different methods, a simple solution that works out-of-the-box for every developer that may be looking at the code was not found, so it was decided that silencing each method individually was the best way to go. Silencing the warnings is a straightforward process which I carried out by simply annotating methods producing the aforementioned warnings with @SuppressWarnings("BooleanMethodIsAlwaysInverted"). After discussion with the triage owner, it was recommended that I do not touch any files that belong to a third party plugin, namely the ExoPlayer plugin for GeckoView, so any warnings that were part of that plugin were not changed. 

# Testing
In order to test whether my changes have successfully fixed the issues, the code analyzer for GeckoView must pass with no warnings of this type. Knowing that the change has addressed the bug is simple, when analyzing the code in Android Studio warnings were previously produced (BooleanMethodIsAlwaysInverted) mentioning that the method value way always inverted. After suppressing this, users no longer seen these warnings when Analyzing, freeing up focus on more important issues.