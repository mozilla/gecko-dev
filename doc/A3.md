https://bugzilla.mozilla.org/show_bug.cgi?id=1585806
TODO: github pull request link

Issue:

There is an enum called SideBits that is used in a variety of bitwise operations. The issue is that this is a plain enum when it is safer to user the new c++11 class enum. Plain enums are not type safe and implicity convert to an integer. The reason this is bad is because it allows the enum type to be used in ways that it is not intended. For example using two enums meant for bitwise operations like enum\*enum. By changing this to an enum class we can ensure only the bitwise operators are permitted to be used on enums  and prevent difficult to track developer errors in the future. 

Solution:

The solution to this problem is to change enum SideBits to enum class SideBits, and remove the enum name from the values (e.g. eSideBitsNone becomes SideBits:eNonde). I have discovered in the code that work will be automatically performed on enum classes to link up bitwise operators. 

Once the type is changed from enum to enum class there will be numerous usages of the enum that will become invalid. The next step will be to identify the errors and correct the usage, likely with a static_cast<int>(). This is the main point of the change,that the enums are no longer implictly casted to be integers and the programmers must be explicit with their intention, reducing the chance of incorrect usage.

Test Plan:
This fix doesn't require testing so much but it can be demonstrated that the new format will be less prone to error. For example consider this situation that could arise from the use of a plain enum.

example

Now consider the same situation with our improved enum class.

example

This will produce an error letting the developer know they have incorrectly used these values. By improving the type safety of this c++11 feature we prevent future time lost difficult to track errors caused by mis-use.