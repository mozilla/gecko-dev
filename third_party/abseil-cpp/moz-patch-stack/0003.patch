From: Michael Froman <mfroman@mozilla.com>
Date: Thu, 20 Oct 2022 16:14:00 +0000
Subject: Bug 1795982 - pt2 - Tweak upstream gn files for Firefox build. r=ng

(skip-generation)

Differential Revision: https://phabricator.services.mozilla.com/D159739
Mercurial Revision: https://hg.mozilla.org/mozilla-central/rev/bc4484a59d929629a9f0ecdeec5d592718b9a376
---
 abseil-cpp/absl/base/BUILD.gn       | 2 +-
 abseil-cpp/absl/flags/BUILD.gn      | 2 +-
 abseil-cpp/absl/functional/BUILD.gn | 2 ++
 3 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/abseil-cpp/absl/base/BUILD.gn b/abseil-cpp/absl/base/BUILD.gn
index f8518fdd1be..e4d006405e1 100644
--- a/abseil-cpp/absl/base/BUILD.gn
+++ b/abseil-cpp/absl/base/BUILD.gn
@@ -51,7 +51,7 @@ absl_source_set("raw_logging_internal") {
     ":atomic_hook",
     ":config",
     ":core_headers",
-    ":errno_saver",
+#    ":errno_saver",
     ":log_severity",
   ]
   visibility = [ "//third_party/abseil-cpp/absl/*" ]
diff --git a/abseil-cpp/absl/flags/BUILD.gn b/abseil-cpp/absl/flags/BUILD.gn
index c1d3927167d..7185cc9831f 100644
--- a/abseil-cpp/absl/flags/BUILD.gn
+++ b/abseil-cpp/absl/flags/BUILD.gn
@@ -143,7 +143,7 @@ absl_source_set("flag_internal") {
 #       "//third_party/abseil-cpp/absl/base",
     "//third_party/abseil-cpp/absl/base:config",
     "//third_party/abseil-cpp/absl/base:core_headers",
-    "//third_party/abseil-cpp/absl/base:dynamic_annotations",
+#    "//third_party/abseil-cpp/absl/base:dynamic_annotations",
     "//third_party/abseil-cpp/absl/memory",
     "//third_party/abseil-cpp/absl/meta:type_traits",
     "//third_party/abseil-cpp/absl/strings",
diff --git a/abseil-cpp/absl/functional/BUILD.gn b/abseil-cpp/absl/functional/BUILD.gn
index 4a1b5fe35a2..f68a3d716f0 100644
--- a/abseil-cpp/absl/functional/BUILD.gn
+++ b/abseil-cpp/absl/functional/BUILD.gn
@@ -16,6 +16,7 @@ absl_source_set("any_invocable") {
   ]
 }
 
+if (!moz_webrtc_build) {
 absl_test("any_invocable_test") {
   sources = [
     "any_invocable_test.cc",
@@ -30,6 +31,7 @@ absl_test("any_invocable_test") {
     "//third_party/abseil-cpp/absl/utility",
   ]
 }
+}
 
 absl_source_set("bind_front") {
   sources = [ "internal/front_binder.h" ]
