From: Daniel Baker <dbaker@mozilla.com>
Date: Tue, 27 Aug 2024 19:33:12 -0600
Subject: (tmp-cherry-pick) Revert "Upgrade iOS buildbot xcode to 15f31d."
 (36b548b31a)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This reverts commit 74c761384fdeb6b4acbef2d06cf610c0a1b6482e.

Reason for revert: breaks iOS compilation

Original change's description:
> Upgrade iOS buildbot xcode to 15f31d.
>
> Change-Id: I42a4b07668fe03191d9528fed73eed6500568890
> Bug: None
> No-Try: true
> Reviewed-on: https://webrtc-review.googlesource.com/c/src/+/357542
> Reviewed-by: Mirko Bonadei <mbonadei@webrtc.org>
> Commit-Queue: Jeremy Leconte <jleconte@google.com>
> Cr-Commit-Position: refs/heads/main@{#42660}

Bug: None
Change-Id: I2616433602f7bb5d3e9febc33f2008ffbeeb2065
No-Presubmit: true
No-Tree-Checks: true
No-Try: true
Reviewed-on: https://webrtc-review.googlesource.com/c/src/+/357544
Reviewed-by: Bj√∂rn Terelius <terelius@webrtc.org>
Commit-Queue: Jeremy Leconte <jleconte@google.com>
Cr-Commit-Position: refs/heads/main@{#42661}
---
 infra/config/config.star        |  8 +++---
 infra/config/cr-buildbucket.cfg | 48 ++++++++++++++++-----------------
 2 files changed, 28 insertions(+), 28 deletions(-)

diff --git a/infra/config/config.star b/infra/config/config.star
index e5c8f1bb2e..8a42399d9c 100755
--- a/infra/config/config.star
+++ b/infra/config/config.star
@@ -13,7 +13,7 @@ lucicfg.check_version("1.30.9")
 WEBRTC_GIT = "https://webrtc.googlesource.com/src"
 WEBRTC_GERRIT = "https://webrtc-review.googlesource.com/src"
 WEBRTC_TROOPER_EMAIL = "webrtc-troopers-robots@google.com"
-WEBRTC_XCODE = "15f31d"
+WEBRTC_XCODE14 = "14c18"
 DEFAULT_CPU = "x86-64"
 
 # Helpers:
@@ -707,10 +707,10 @@ def normal_builder_factory(**common_kwargs):
 # Mixins:
 
 ios_builder, ios_try_job = normal_builder_factory(
-    properties = {"xcode_build_version": WEBRTC_XCODE},
+    properties = {"xcode_build_version": WEBRTC_XCODE14},
     caches = [swarming.cache(
-        name = "xcode_ios_" + WEBRTC_XCODE,
-        path = "xcode_ios_" + WEBRTC_XCODE + ".app",
+        name = "xcode_ios_" + WEBRTC_XCODE14,
+        path = "xcode_ios_" + WEBRTC_XCODE14 + ".app",
     )],
 )
 
diff --git a/infra/config/cr-buildbucket.cfg b/infra/config/cr-buildbucket.cfg
index 2d7f2b7c14..9edb6a2cc6 100644
--- a/infra/config/cr-buildbucket.cfg
+++ b/infra/config/cr-buildbucket.cfg
@@ -1593,13 +1593,13 @@ buckets {
         '  },'
         '  "builder_group": "client.webrtc",'
         '  "recipe": "webrtc/ios_api_framework",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 29
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -1645,13 +1645,13 @@ buckets {
         '  },'
         '  "builder_group": "client.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -1697,13 +1697,13 @@ buckets {
         '  },'
         '  "builder_group": "client.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -1749,13 +1749,13 @@ buckets {
         '  },'
         '  "builder_group": "client.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-ci-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -3387,13 +3387,13 @@ buckets {
         '  },'
         '  "builder_group": "tryserver.webrtc",'
         '  "recipe": "webrtc/ios_api_framework",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-try-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -3439,13 +3439,13 @@ buckets {
         '  },'
         '  "builder_group": "tryserver.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-try-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -3491,13 +3491,13 @@ buckets {
         '  },'
         '  "builder_group": "tryserver.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-try-builder@chops-service-accounts.iam.gserviceaccount.com"
@@ -3543,13 +3543,13 @@ buckets {
         '  },'
         '  "builder_group": "tryserver.webrtc",'
         '  "recipe": "webrtc/standalone",'
-        '  "xcode_build_version": "15f31d"'
+        '  "xcode_build_version": "14c18"'
         '}'
       priority: 30
       execution_timeout_secs: 7200
       caches {
-        name: "xcode_ios_15f31d"
-        path: "xcode_ios_15f31d.app"
+        name: "xcode_ios_14c18"
+        path: "xcode_ios_14c18.app"
       }
       build_numbers: YES
       service_account: "webrtc-try-builder@chops-service-accounts.iam.gserviceaccount.com"
